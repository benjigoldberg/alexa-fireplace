{% extends "base.jinja" %}
{% block title %}Login to Alexa Fireplace{% endblock %}

{% block head %}
{{ super() }}
<style>
  h3 {text-align: center;}
</style>
{% endblock %}

{% block content %}
{{ super() }}
<h3>Welcome to Alexa Fireplace!</h3>
<div class="row">
  <form id="login-form">
    <div class="form-group">
      <label for="username">User Name:</label>
      <input id="username" name="username" type="text" 
          placeholder="User Name" class="form-control" required="true">
      </input>
    </div>
    <div class="form-group">
      <label for="password">Password:</label>
      <input id="password" name="password" type="password" 
          placeholder="Password" class="form-control" required="true">
      </input>
    </div>
    <button type="submit" class="btn btn-block">Log In</button>
  </form>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">
  var login = function(username, password) {
    var data = JSON.stringify({"username": username, "password": password});
    $.ajax({
        url: "/login",
        type: "POST",
        data: data,
        contentType: "application/json; charset=utf-8",
    }).done(function(data) {
      window.location.href = 'fireplace'
    }).fail(function(error) {
      console.log(error);
    });
  };

  $("#login-form").submit(function(event) {
    event.preventDefault();
    login($(this).find("#username").val(), $(this).find("#password").val());
    return false;
  });
</script>
{% endblock %}
